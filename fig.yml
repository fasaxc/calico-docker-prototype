#On master
#docker run -d -v /var/log/bird:/var/log/bird --privileged=true --name="bird" --net=host --restart=always -t calico:bird /usr/bin/run_bird bird1.conf
#docker run -d -v /var/log/calico:/var/log/calico --privileged=true --name="plugin1" --net=host -v /opt/plugin:/opt/plugin calico:plugin python /opt/scripts/plugin.py network
#docker run -d -v /var/log/calico:/var/log/calico --privileged=true --name="plugin2" --net=host -v /opt/plugin:/opt/plugin calico:plugin python /opt/scripts/plugin.py ep
#docker run -d -v /var/log/calico:/var/log/calico --privileged=true --name="felix" --net=host --restart=always -t calico:felix calico-felix --config-file=/etc/calico/felix.cfg
#docker run -d -v /var/log/calico:/var/log/calico --privileged=true --name="aclmgr" --net=host --restart=always -t calico:felix calico-acl-manager --config-file=/etc/calico/acl_manager.cfg

#On other hosts
#docker run -d -v /var/log/calico:/var/log/calico --privileged=true --name="felix" --net=host --restart=always -t calico:felix calico-felix --config-file=/etc/calico/felix.cfg
#docker run -d -v /var/log/bird:/var/log/bird --privileged=true --name="bird" --net=host --restart=always -t calico:bird /usr/bin/run_bird bird2.conf


bird:
    build: bird
    volumes:
     - /var/log/bird
    net: "host"
    privileged: true
#    restart: "always"
    command: /usr/bin/run_bird bird1.conf

pluginnetwork:
    build: plugin 
    volumes:
     - /var/log/calico
    net: "host"
    privileged: true
    command: python plugin.py network

pluginep:
    build: plugin
    volumes:
     - /var/log/calico
    net: "host"
    privileged: true
    command: python plugin.py ep

felix:
    build: felix
    volumes:
     - /var/log/calico
    net: "host"
    privileged: true
#    restart: "always"
    command: calico-felix --config-file=/etc/calico/felix.cfg

aclmanager:
    build: felix
    volumes:
     - /var/log/calico
    net: "host"
    privileged: true
#    restart: "always"
    command: calico-acl-manager --config-file=/etc/calico/acl_manager.cfg


